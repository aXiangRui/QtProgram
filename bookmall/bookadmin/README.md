# BookAdmin - 图书管理系统管理员端

## 项目概述

BookAdmin是图书管理系统的超级管理员客户端，提供全局数据监控、用户管理、商家管理等高级功能。

---

## 🎯 核心功能

### 1. 用户管理 👥
- 查看所有买家用户列表
- 查看用户详细信息
- 添加新用户（手动创建账号）
- 编辑用户信息（余额、等级等）
- 删除用户账号
- 封禁/解封用户

### 2. 商家管理 🏪
- 查看所有商家列表
- 查看商家详细信息
- 审批和添加新商家
- 编辑商家信息
- 删除商家账号
- 封禁/解封商家

### 3. 图书管理 📚
- 查看所有商家上架的图书
- 编辑任意图书信息
- 删除违规图书（全局下架）
- 监控图书库存状态

### 4. 订单管理 📦
- 查看所有订单（买家+商家）
- 查看订单详细信息
- 删除异常订单
- 订单统计分析

### 5. 系统统计 📊
- 仪表盘总览
  * 总用户数
  * 总商家数
  * 总图书数
  * 总订单数
- 实时统计数据
- 系统健康监控

---

## 🔐 权限说明

### 管理员权限
- ✅ 查看所有用户和商家数据
- ✅ 删除任何数据（用户、商家、图书、订单）
- ✅ 编辑全局数据
- ✅ 封禁违规账号
- ✅ 查看系统统计和日志

### 默认账号
```
用户名：admin
密码：admin
```

⚠️ **生产环境请务必修改默认密码！**

---

## 🎨 界面设计

### 登录页面
- 深蓝渐变背景
- 半透明白色登录框
- 自动连接服务器
- 实时连接状态显示

### 仪表盘
- 欢迎标签（蓝色渐变）
- 6个导航按钮（图标+文字）
- 4个统计卡片（彩色数字）
- 现代卡片式布局

### 管理页面
- 顶部标题栏
- 功能按钮组
- 数据表格（蓝色表头）
- 返回按钮

---

## 🔌 TCP通信

### 连接配置
- 服务器IP：127.0.0.1（默认）
- 端口：8888
- 自动连接：启动后500ms自动连接

### 通信协议
- **协议**：TCP
- **格式**：JSON
- **帧结构**：4字节长度前缀 + JSON数据

### API列表

#### 认证接口
```json
// 管理员登录
{
  "action": "adminLogin",
  "username": "admin",
  "password": "admin"
}
```

#### 用户管理接口
```json
// 获取所有用户
{"action": "adminGetAllUsers", "adminId": "ADMIN001"}

// 删除用户
{"action": "adminDeleteUser", "adminId": "ADMIN001", "userId": "1001"}
```

#### 商家管理接口
```json
// 获取所有商家
{"action": "adminGetAllSellers", "adminId": "ADMIN001"}

// 删除商家
{"action": "adminDeleteSeller", "adminId": "ADMIN001", "sellerId": "2001"}
```

#### 图书管理接口
```json
// 获取所有图书
{"action": "adminGetAllBooks", "adminId": "ADMIN001"}

// 删除图书
{"action": "adminDeleteBook", "adminId": "ADMIN001", "bookId": "001"}
```

#### 订单管理接口
```json
// 获取所有订单
{"action": "adminGetAllOrders", "adminId": "ADMIN001"}

// 删除订单
{"action": "adminDeleteOrder", "adminId": "ADMIN001", "orderId": "ORDER001"}
```

#### 统计接口
```json
// 获取系统统计
{"action": "adminGetSystemStats", "adminId": "ADMIN001"}
```

---

## 🚀 使用指南

### 编译
```bash
cd D:\qt\bookadmin
qmake bookadmin.pro
make
```

### 运行
```bash
# Windows
cd debug
bookadmin.exe

# Linux/Mac
./bookadmin
```

### 基本操作流程

#### 1. 登录系统
1. 启动程序（自动连接服务器）
2. 输入：admin / admin
3. 点击"登录系统"

#### 2. 查看用户
1. 点击"👥 用户管理"
2. 查看所有买家用户列表
3. 选择用户可以查看详情
4. 点击"删除用户"可以删除账号

#### 3. 查看商家
1. 返回主页
2. 点击"🏪 商家管理"
3. 查看所有商家列表
4. 可以删除或封禁商家

#### 4. 管理图书
1. 返回主页
2. 点击"📚 图书管理"
3. 查看所有商家上架的图书
4. 可以删除违规图书

#### 5. 监控订单
1. 返回主页
2. 点击"📦 订单管理"
3. 查看所有订单
4. 可以删除异常订单

#### 6. 查看统计
1. 返回主页
2. 点击"📊 系统统计"
3. 查看详细统计信息
4. 监控系统运行状态

---

## 🎯 管理场景

### 场景1：处理违规图书
1. 买家举报某图书违规
2. 管理员登录BookAdmin
3. 进入"图书管理"
4. 找到该图书
5. 点击"删除图书"
6. 该图书从系统下架
7. 买家和商家都看不到了

### 场景2：处理用户投诉
1. 用户投诉订单问题
2. 管理员查看"订单管理"
3. 找到该订单
4. 查看订单详情
5. 根据情况删除或联系商家处理

### 场景3：商家审核
1. 新商家申请入驻
2. 管理员在"商家管理"中添加
3. 设置商家信息和权限
4. 商家可以开始上架图书

### 场景4：系统监控
1. 每日登录BookAdmin
2. 查看仪表盘统计
3. 监控用户增长
4. 监控订单量变化
5. 及时发现异常

---

## 📊 数据字段说明

### 用户数据
```json
{
  "userId": "用户ID",
  "username": "用户名",
  "email": "邮箱",
  "registerDate": "注册日期",
  "status": "状态（正常/封禁）",
  "balance": "余额"
}
```

### 商家数据
```json
{
  "sellerId": "商家ID",
  "sellerName": "商家名称",
  "contact": "联系方式",
  "registerDate": "注册日期",
  "status": "状态（正常/封禁）"
}
```

### 图书数据
```json
{
  "isbn": "ISBN编号",
  "title": "书名",
  "author": "作者",
  "category": "分类",
  "price": "价格",
  "stock": "库存",
  "status": "状态（正常/缺货）"
}
```

### 订单数据
```json
{
  "orderId": "订单ID",
  "userId": "用户ID",
  "totalAmount": "总金额",
  "status": "订单状态",
  "orderDate": "下单日期",
  "items": "商品详情"
}
```

---

## ⚠️ 注意事项

### 1. 权限管理
- 管理员拥有最高权限
- 删除操作不可恢复
- 建议谨慎使用删除功能

### 2. 数据安全
- 当前数据存储在内存中
- 服务器重启后数据丢失
- 建议添加数据库持久化

### 3. 并发处理
- 服务器使用互斥锁保护数据
- 支持多管理员同时登录
- 注意避免同时删除同一数据

### 4. 网络连接
- 自动连接服务器
- 连接失败会在登录时重试
- 网络断开会显示错误提示

---

## 🔧 常见问题

### Q: 无法连接服务器
**A**: 
1. 确认Server已启动
2. 检查端口8888是否被占用
3. 检查防火墙设置

### Q: 登录失败
**A**:
1. 确认使用admin/admin
2. 查看Server端日志
3. 检查网络连接

### Q: 删除数据后其他端看不到
**A**: 这是正常的，需要其他端刷新列表才能看到最新数据

### Q: 统计数据不准确
**A**: 点击"刷新统计"按钮更新数据

---

## 📚 相关文档

- `三端系统完整文档.md` - 系统架构和完整测试流程
- `业务逻辑修改说明.md` - 业务流程说明
- `测试说明.md` - 详细测试用例

---

## 👨‍💻 开发信息

**技术栈**：Qt 5.x, C++11, TCP/IP, JSON  
**开发模式**：客户端-服务器架构  
**通信协议**：TCP长连接 + JSON  
**UI风格**：现代化卡片式设计  

---

**BookAdmin - 让系统管理变得简单高效！** 🎯✨

